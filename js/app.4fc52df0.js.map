{"version":3,"file":"js/app.4fc52df0.js","mappings":"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","sources":["webpack://pdf-bookmark-editor/./src/App.vue?7c1d","webpack://pdf-bookmark-editor/./src/App.vue","webpack://pdf-bookmark-editor/./src/components/AddBookmarks.vue?80c3","webpack://pdf-bookmark-editor/./src/components/AddBookmarks.vue","webpack://pdf-bookmark-editor/./src/components/DragList.vue?462c","webpack://pdf-bookmark-editor/./src/components/DragList.vue","webpack://pdf-bookmark-editor/./src/components/DragList.vue?1413","webpack://pdf-bookmark-editor/./src/lib/bookmarks.ts","webpack://pdf-bookmark-editor/./src/components/AddBookmarks.vue?b3bb","webpack://pdf-bookmark-editor/./src/components/FixedSizeContainer.vue?8689","webpack://pdf-bookmark-editor/./src/components/FixedSizeContainer.vue","webpack://pdf-bookmark-editor/./src/components/FixedSizeContainer.vue?db35","webpack://pdf-bookmark-editor/./src/components/Upload.vue?0dfd","webpack://pdf-bookmark-editor/./src/components/Upload.vue","webpack://pdf-bookmark-editor/./src/components/Upload.vue?92f2","webpack://pdf-bookmark-editor/./src/App.vue?7ccd","webpack://pdf-bookmark-editor/./src/main.ts","webpack://pdf-bookmark-editor/webpack/bootstrap","webpack://pdf-bookmark-editor/webpack/runtime/chunk loaded","webpack://pdf-bookmark-editor/webpack/runtime/compat get default export","webpack://pdf-bookmark-editor/webpack/runtime/define property getters","webpack://pdf-bookmark-editor/webpack/runtime/global","webpack://pdf-bookmark-editor/webpack/runtime/hasOwnProperty shorthand","webpack://pdf-bookmark-editor/webpack/runtime/jsonp chunk loading","webpack://pdf-bookmark-editor/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Upload = _resolveComponent(\"Upload\")!\n  const _component_AddBookmarks = _resolveComponent(\"AddBookmarks\")!\n  const _component_Fixed = _resolveComponent(\"Fixed\")!\n\n  return (_openBlock(), _createBlock(_component_Fixed, { style: {\"position\":\"absolute\",\"width\":\"100%\",\"height\":\"100%\",\"top\":\"0\",\"left\":\"0\"} }, {\n    default: _withCtx(() => [\n      (_ctx.state.name == 'Upload')\n        ? (_openBlock(), _createBlock(_component_Upload, {\n            key: 0,\n            done: _ctx.fileUpload\n          }, null, 8, [\"done\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.state.name == 'Edit')\n        ? (_openBlock(), _createBlock(_component_AddBookmarks, {\n            key: 1,\n            ref: \"bmeditor\",\n            done: _ctx.setBookmarks\n          }, null, 8, [\"done\"]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}","\n<template>\n  <Fixed style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\">\n    <Upload v-if=\"state.name == 'Upload'\" :done=\"fileUpload\"> </Upload>\n    <AddBookmarks ref=\"bmeditor\" v-if=\"state.name == 'Edit'\" :done=\"setBookmarks\"></AddBookmarks>\n  </Fixed>\n</template>\n\n<script lang=\"ts\">\nimport { PDFDocument } from \"pdf-lib\";\nimport { defineComponent } from \"vue\";\nimport AddBookmarks from \"./components/AddBookmarks.vue\";\nimport Fixed from \"./components/FixedSizeContainer.vue\";\nimport Upload from \"./components/Upload.vue\";\nimport { PDFBookmark, appendOutline, deleteOutline, setPdfOutline, SimpleBookmark } from \"./lib/bookmarks\";\n\ntype ApplicationState = {\n  name: \"Upload\" \n} | {\n  name: \"Edit\"\n  pdf: PDFDocument,\n};\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    AddBookmarks,\n    Fixed,\n    Upload\n},\n  data() {\n    return {\n      state: {name: \"Upload\"} as ApplicationState\n    }\n  },\n  methods: {\n    fileUpload(file: { name: string; content: ArrayBuffer }) {\n      PDFDocument.load(file.content).then((doc) => {\n        this.state = { pdf: doc, name: \"Edit\" }\n        this.$nextTick(() => this.$refs.bmeditor.setDefaultText(doc));\n      }).catch((e) => console.error(e))\n    },\n    async setBookmarks(bookmarks: PDFBookmark[], bm: SimpleBookmark[]) {\n      let state = this.state;\n      if(state.name !== \"Edit\")\n        return;\n      let pdf2 = state.pdf//await state.pdf.copy();\n      setPdfOutline(pdf2, bm);\n\n      //deleteOutline(pdf2);\n      //appendOutline(pdf2, bookmarks);\n      let bytes = await pdf2.save();\n      let blob = new Blob([bytes], {type: \"application/pdf\"});\n      let dataURI = URL.createObjectURL(blob);\n      window.open(dataURI);\n    }\n  },\n});\n</script>\n\n<style lang=\"scss\">\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  width: 100%;\n  height: 100%;\n}\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n}\nbody {\n  overflow: hidden;\n}\n</style>\n","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-278ac369\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"editor\",\n  class: \"editor\"\n}\nconst _hoisted_2 = {\n  class: \"preview\",\n  style: {\"padding\":\"1em\"}\n}\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", { style: {\"text-align\":\"center\"} }, \"Preview\", -1))\nconst _hoisted_4 = { style: {opacity: 0.5 } }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TreeView = _resolveComponent(\"TreeView\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, null, 512),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_TreeView, {\n        nodes: _ctx.bm,\n        children: (node => node.children)\n      }, {\n        node: _withCtx((props) => [\n          _createElementVNode(\"span\", null, _toDisplayString(props.node.title), 1),\n          _createTextVNode(),\n          _createElementVNode(\"span\", _hoisted_4, \"[\" + _toDisplayString((typeof(props.node.dest) == \"number\" ? \"P. \" : \"*\") + props.node.dest) + \"]\", 1)\n        ]),\n        _: 1\n      }, 8, [\"nodes\", \"children\"])\n    ]),\n    _createElementVNode(\"button\", {\n      class: \"done_btn\",\n      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.done?.(_ctx.bookmarks, _ctx.bm)))\n    }, \"Show Result in new Tab\")\n  ], 64))\n}","<template>\n  <div ref=\"editor\" class=\"editor\"></div>\n  <div class=\"preview\" style=\"padding: 1em\">\n    <h2 style=\"text-align: center\">Preview</h2>\n    \n    <TreeView :nodes=\"bm\" :children=\"(node => node.children)\">\n      <template #node=\"props\">\n        <span>{{props.node.title}}</span> <span :style=\"{opacity: 0.5 }\">[{{(typeof(props.node.dest) == \"number\" ? \"P. \" : \"*\") + props.node.dest}}]</span>\n      </template>\n    </TreeView>\n  </div>\n  <button class=\"done_btn\" @click=\"done?.(bookmarks, bm)\">Show Result in new Tab</button>\n</template>\n\n<script lang=\"ts\">\nimport { ViewUpdate } from \"@codemirror/view\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { defineComponent, PropType } from \"vue\";\nimport TreeView from \"./DragList.vue\";\nimport { parseBookmarks, PDFBookmark, getSimpleBookmarks, SimpleBookmark } from \"../lib/bookmarks\";\nimport { PDFDocument } from \"pdf-lib\";\n\nfunction bookmarkstotext(bm: any, indent = 0) {\n  let text = \"\";\n  for (let b of bm) {\n    text += \" \".repeat(indent) + b.title;\n    if (typeof b.dest === \"string\") {\n      text += \" [*\" + b.dest + \"]\\n\";\n    } else {\n      text += \" [\" + b.dest + \"]\\n\";\n    }\n    if (b.children) {\n      text += bookmarkstotext(b.children, indent + 2);\n    }\n  }\n  return text;\n}\n\ntype ReadState = {\n  index: number;\n  indent: number;\n}\n\nfunction texttobookmarks(lines: string[], state: ReadState = { index: 0, indent: 0 }) {\n  const bookmarks = [];\n  \n  while (state.index < lines.length) {\n    const line = lines[state.index];\n\n    const indent = line.search(/\\S/);\n    if (indent == -1) {\n      state.index++;\n      continue;\n    } else if (indent < state.indent) {\n      return bookmarks;\n    } else if (indent > state.indent) {\n      const _indent = state.indent;\n\n      state.indent = indent;\n      const children = texttobookmarks(lines, state);\n      state.indent = _indent;\n      \n      if (children.length > 0) {\n        bookmarks[bookmarks.length - 1].children = children;\n      } else {\n        bookmarks.push(...children);\n      }\n      continue;\n    }\n    \n    state.index++;\n    // match \"name [page]\" only if not staring with %\n    const match = line.match(/^([^%].*)\\[(.*)\\]$/);\n    if (match) {\n      if (match[2].startsWith(\"*\")) {\n        bookmarks.push({ title: match[1], dest: match[2].slice(1) });\n      } else {\n        bookmarks.push({ title: match[1], dest: parseInt(match[2]) });\n      }\n    } else if (!line.startsWith(\"%\") && line.trim().length > 0) {\n      bookmarks.push({ title: line, dest: NaN });\n    }\n  }\n  return bookmarks;\n}\n\nexport default defineComponent({\n  name: \"AddBookmarks\",\n  components: {\n    TreeView: TreeView,\n  },\n  props: {\n    done: {\n      type: Function as PropType<(bookmarks: PDFBookmark[]) => any>,\n    },\n  },\n  data() {\n    return {\n      bookmarks: [] as PDFBookmark[],\n      bm: [] as SimpleBookmark[],\n      editor: null as EditorView | null,\n    };\n  },\n  methods: {\n    setDefaultText(doc: PDFDocument) {\n      const bookmarks = getSimpleBookmarks(doc);\n      let text = bookmarkstotext(bookmarks);\n      this.editor.dispatch({\n        changes: {\n          from: 0,\n          to: this.editor.state.doc.length,\n          insert: text,\n        },\n      });\n\n      return;\n    },\n    editorUpdate(update: ViewUpdate) {\n      const lines = update.state.doc.toJSON();\n      if (update.docChanged) {\n        this.bm = texttobookmarks(lines) || [];\n        this.bookmarks = parseBookmarks(update.state.doc.toJSON());\n      }\n    },\n  },\n  mounted() {\n    // Mount editor\n    let e = new EditorView({\n      parent: this.$refs.editor as any,\n      extensions: [basicSetup, EditorView.updateListener.of(this.editorUpdate)],\n    });\n    this.editor = e;\n    e.dom.style.height = \"100%\";\n    e.dom.style.width = \"100%\";\n    e.dispatch({\n      changes: {\n        from: 0,\n        to: e.state.doc.length,\n        insert: `% Enter new bookmarks here.\\n% Example:\\nCover 1\\nChap 1 3\\n  Chap 1.1 4`,\n      },\n    });\n  },\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.editor {\n  all: initial;\n  display: block;\n  width: 50%;\n  height: 100%;\n  border-right: 1px solid black;\n}\n.preview {\n  all: initial;\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  width: 50%;\n  height: 100%;\n  overflow: auto;\n}\n.done_btn {\n  display: block;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  margin: 1em;\n}\n</style>\n","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"bookmarks\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TreeView = _resolveComponent(\"TreeView\")!\n\n  return (_openBlock(), _createElementBlock(\"ul\", _hoisted_1, [\n    _createTextVNode(\" TEST \"),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.nodes, (node) => {\n      return (_openBlock(), _createElementBlock(\"li\", {\n        draggable: \"true\",\n        key: node\n      }, [\n        _renderSlot(_ctx.$slots, \"node\", { node: node }, () => [\n          _createTextVNode(_toDisplayString(node), 1)\n        ]),\n        (_ctx.children(node))\n          ? (_openBlock(), _createBlock(_component_TreeView, {\n              key: 0,\n              nodes: _ctx.children(node),\n              children: _ctx.children\n            }, {\n              node: _withCtx((data) => [\n                _renderSlot(_ctx.$slots, \"node\", {\n                  node: data.node\n                }, () => [\n                  _createTextVNode(_toDisplayString(node), 1)\n                ])\n              ]),\n              _: 2\n            }, 1032, [\"nodes\", \"children\"]))\n          : _createCommentVNode(\"\", true)\n      ]))\n    }), 128))\n  ]))\n}","<template>\n  <ul class=\"bookmarks\">\n    TEST\n    <li draggable=\"true\" v-for=\"node of nodes\" v-bind:key=\"node\">\n      <slot name=\"node\" :node=\"node\">{{ node }}</slot>\n      <TreeView v-if=\"children(node)\" :nodes=\"children(node)\" :children=\"children\">\n        <template #node=\"data\">\n          <slot name=\"node\" :node=\"data.node\">{{ node }}</slot>\n        </template>\n      </TreeView>\n    </li>\n  </ul>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\n\n/**\n * Type inference sucks but works better on classes\n */\nclass TyperInferHelper<T> {\n  factory() {\n    return defineComponent({\n      name: \"TreeView\",\n      props: {\n        nodes: {\n          type: Array as PropType<T[]>,\n          required: true,\n        },\n        children: {\n          type: Function as PropType<(node: T) => T[]>,\n          required: true,\n        },\n      },\n    });\n  }\n}\n\nexport function asGeneric<T>() {\n  return component as ReturnType<TyperInferHelper<T>[\"factory\"]>;\n}\n\nconst component = new TyperInferHelper<any>().factory();\n//export default component;\n\nexport default defineComponent({\n  name: \"TreeView\",\n  props: {\n    nodes: {\n      type: Array as PropType<any[]>,\n      required: true,\n    },\n    children: {\n      type: Function as PropType<(node: any) => any[]>,\n      required: true,\n    },\n  },\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\"></style>\n","import { render } from \"./DragList.vue?vue&type=template&id=35458f9e&ts=true\"\nimport script from \"./DragList.vue?vue&type=script&lang=ts\"\nexport * from \"./DragList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { stringifyStyle } from \"@vue/shared\";\nimport {\n  PDFArray,\n  PDFDict,\n  PDFDocument,\n  PDFName,\n  PDFNull,\n  PDFNumber,\n  PDFObject,\n  PDFPage,\n  PDFRef,\n  PDFString,\n  PDFHexString,\n} from \"pdf-lib\";\n\n\nexport type SimpleBookmark = {\n  title: string;\n  dest: number | string | undefined;\n  children: SimpleBookmark[] | undefined;\n};\n\n/**\n  * See pdf spec 1.7 - 12.3.3\n  */\nfunction _parseBookmarkDict(doc: PDFDocument, dict: PDFDict): SimpleBookmark[] | undefined {\n  let first: PDFDict | undefined = dict.lookupMaybe(PDFName.of(\"First\"), PDFDict);\n\n  if (first == undefined) return undefined;\n\n  const result = [] as SimpleBookmark[];\n\n  while (first != undefined) {\n    const title = first.lookupMaybe(PDFName.of(\"Title\"), PDFString, PDFHexString);\n    const next = first.lookupMaybe(PDFName.of(\"Next\"), PDFDict);\n    \n    // Read destination or action\n    let dest = first.lookup(PDFName.of(\"Dest\")) as PDFArray | PDFString | PDFHexString | undefined;\n    const a = first.lookup(PDFName.of(\"A\")) as PDFDict | undefined;\n    if (a) {\n      const name = a.lookup(PDFName.of(\"S\"));\n      if (name != PDFName.of(\"GoTo\")) {\n        console.log(\"Not a GoTo action\");\n        continue;\n      }\n      console.log(a)\n      dest = a.lookup(PDFName.of(\"D\")) as PDFArray | undefined;\n    }\n    \n    let simpleDest;\n\n    if( dest instanceof PDFArray) {\n      const pageRef = dest.get(0);\n      simpleDest = doc.getPages().findIndex(p => (p as any).ref == pageRef)+1;\n    } else {\n      simpleDest = dest.asString();\n    }\n    result.push({ title: title.asString(), dest: simpleDest, children: _parseBookmarkDict(doc, first) });\n    first = next;\n  }\n  console.log(result);\n  return result;\n}\n\nexport function getSimpleBookmarks(doc: PDFDocument) {\n  const oulines = doc.catalog.lookupMaybe(PDFName.of(\"Outlines\"), PDFDict);\n\n  if (oulines === undefined) return undefined;\n\n  return _parseBookmarkDict(doc, oulines);\n}\n\nfunction _fromSimpleBookmark(\n  doc: PDFDocument,\n  bm: SimpleBookmark,\n  _defaults?: Map<PDFName, PDFObject>,\n  _ref?: PDFRef \n) {\n  const bookmark_ref = _ref || doc.context.nextRef();\n  const bookmark = PDFDict.fromMapWithContext(_defaults || new Map(), doc.context);\n  doc.context.assign(bookmark_ref, bookmark);\n\n  bookmark.set(PDFName.of(\"Title\"), PDFHexString.fromText(bm.title));\n  \n  if(bm.children) {\n    _setSimpleBookmarks(doc, bookmark, bookmark_ref, bm.children);\n  }\n\n  if(bm.dest) {\n    if(typeof bm.dest === \"number\") {\n      const dest = PDFArray.withContext(doc.context);\n      const page = doc.getPages()[bm.dest-1];\n      dest.push(page.ref);\n      dest.push(PDFName.of(\"Fit\"));\n      bookmark.set(PDFName.of(\"Dest\"), dest);\n    } else {\n      const dest = PDFString.of(bm.dest);\n      bookmark.set(PDFName.of(\"Dest\"), dest);\n    }\n  }\n  \n  console.log(bookmark.asMap());\n  return bookmark_ref;\n}\n\nfunction _setSimpleBookmarks(doc: PDFDocument, dict: PDFDict, ref: PDFRef, bookmarks: SimpleBookmark[]) {\n  const child_refs = [] as PDFRef[];\n  for (let i = 0; i < bookmarks.length; i++) {\n    child_refs.push(doc.context.nextRef());\n  }\n  for (let i = 0; i < bookmarks.length; i++) {\n    const child = bookmarks[i];\n    const props = new Map([\n      [PDFName.of(\"Parent\"), ref],\n      [PDFName.of(\"Prev\"), child_refs[i-1]],\n      [PDFName.of(\"Next\"), child_refs[i+1]],\n    ]);\n    if(i === 0) props.delete(PDFName.of(\"Prev\"));\n    if(i === bookmarks.length-1) props.delete(PDFName.of(\"Next\"));\n    _fromSimpleBookmark(doc, child, new Map(props), child_refs[i]);\n  }\n\n  dict.set(PDFName.of(\"First\"), child_refs[0]);\n  dict.set(PDFName.of(\"Last\"), child_refs[child_refs.length-1]);\n  dict.set(PDFName.of(\"Count\"), PDFNumber.of(child_refs.length));\n}\n\nexport function setPdfOutline(doc: PDFDocument, bookmarks?: SimpleBookmark[]) {\n  const outlines_ref = doc.context.nextRef();\n  const outlines = PDFDict.fromMapWithContext(new Map(), doc.context);\n  doc.context.assign(outlines_ref, outlines);\n  \n  if(bookmarks) {\n    _setSimpleBookmarks(doc, outlines, outlines_ref, bookmarks);\n  }\n\n  if(outlines_ref) doc.catalog.set(PDFName.of(\"Outlines\"), outlines_ref);\n}\n\nconst OUTLINES = PDFName.of(\"Outlines\"),\n  FIRST = PDFName.of(\"First\"),\n  NEXT = PDFName.of(\"Next\"),\n  TITLE = PDFName.of(\"Title\"),\n  DEST = PDFName.of(\"Dest\");\n\n/**\n * Carefull: This does not yield all levels of bookmarks. Extracting depth should be done manually\n * @param doc\n * @param first\n */\nfunction* _Outline(\n  doc: PDFDocument,\n  first?: PDFRef\n): Generator<[PDFRef, PDFDict], void, unknown> {\n  let currentRef: PDFRef | undefined;\n  if (first === undefined) {\n    const outRef = doc.catalog.get(OUTLINES);\n    const outDict = doc.context.lookup(outRef) as PDFDict;\n    \n    if(outDict === undefined)\n      return;\n\n    currentRef = outDict.asMap().get(FIRST) as PDFRef | undefined;\n  } else {\n    currentRef = first;\n  }\n\n  while (currentRef !== undefined) {\n    const current = doc.context.lookup(currentRef) as PDFDict;\n\n    yield [currentRef, current];\n\n    currentRef = current.get(NEXT) as PDFRef | undefined;\n  }\n}\n\ntype Dest =\n  | {\n      type: \"Dest\";\n      dest: PDFObject;\n    }\n  | {\n      type: \"A\";\n      dest: PDFObject;\n    }\n  | {\n      type: \"Page\";\n      number: number;\n    };\n\nexport class PDFBookmark {\n  /**\n   * Extract the outline from an existing pdf file.\n   * @param doc The document\n   * @returns\n   */\n  static parseOutline(doc: PDFDocument): PDFBookmark[];\n  /**\n   * Mainly for internal use: Extract the remaining outline started by the outline entry on a given reference.\n   * @param doc The document\n   * @param first The reference to the first outline entry\n   * @returns The ouline following the entry and its children.\n   *   Parents of the given first entry are not parsed.\n   */\n  static parseOutline(doc: PDFDocument, first: PDFRef): PDFBookmark[];\n  static parseOutline(doc: PDFDocument, first?: PDFRef): PDFBookmark[] {\n    const bm: PDFBookmark[] = [];\n    for (const [, curr] of _Outline(doc, first)) {\n      bm.push(PDFBookmark.from(doc, curr));\n    }\n    return bm;\n  }\n\n  /**\n   * Parse a bookmark from a given PDFDict.\n   * @param doc The document\n   * @param dict The dict\n   * @returns The parsed bookmark\n   */\n  static from(doc: PDFDocument, dict: PDFDict): PDFBookmark {\n    const first = dict.get(FIRST) as PDFRef | undefined;\n    const children =\n      first === undefined ? [] : PDFBookmark.parseOutline(doc, first);\n\n    let title: PDFString | PDFRef = dict.get(TITLE) as any;\n    if (title instanceof PDFRef) title = doc.context.lookup(title) as PDFString;\n\n    // Destination can be either \"A\" or \"Dest\" field\n    let destType: \"Dest\" | \"A\" = \"Dest\";\n    let dest: PDFObject | undefined = dict.get(DEST);\n    if (dest === undefined) {\n      destType = \"A\";\n      dest = dict.get(PDFName.of(\"A\"));\n    }\n\n    return new PDFBookmark(\n      title.asString(),\n      children,\n      dest\n        ? {\n            type: destType,\n            dest: dest,\n          }\n        : undefined\n    );\n  }\n\n  constructor(\n    public Title: string,\n    public Children: PDFBookmark[] = [],\n    public Dest?: Dest\n  ) {}\n\n  get hasChildren() {\n    return this.Children.length !== 0;\n  }\n\n  /**\n   * For internal use: Convert this bookmark to a PDFDict for adding to a PDFDocument.\n   * @param doc The document\n   * @param parent The parent bookmark (or Outline base dict)\n   * @param prev The previous bookmark\n   * @param next The next bookmark\n   * @returns A PDFDict containing the bookmatk data.\n   */\n  _toDict(doc: PDFDocument, parent: PDFRef, prev?: PDFRef, next?: PDFRef) {\n    const dict = PDFDict.fromMapWithContext(new Map(), doc.context);\n    dict.set(TITLE, PDFHexString.fromText(this.Title));\n    //PDFString.of(this.Title));\n    dict.set(PDFName.Parent, parent);\n    if (prev) dict.set(PDFName.of(\"Prev\"), prev);\n    if (next) dict.set(PDFName.of(\"Next\"), next);\n    if (this.Dest) {\n      const d = this.Dest;\n      let page: PDFPage | null;\n      let arr: PDFArray;\n      switch (d.type) {\n        case \"Dest\":\n          dict.set(PDFName.of(\"Dest\"), d.dest);\n          break;\n        case \"A\":\n          dict.set(PDFName.of(\"A\"), d.dest);\n          break;\n        case \"Page\":\n          arr = PDFArray.withContext(doc.context);\n          \n          if (\"name\" in d) page = null as any;\n          else page = doc.getPages()[d.number - 1];\n\n          if (!page) break;\n\n          arr.push(page.ref);\n          arr.push(PDFName.of(\"Fit\"));\n          dict.set(DEST, arr);\n          break;\n        default:\n          // eslint-disable-next-line\n          const n: never = d;\n      }\n    }\n\n    return dict;\n  }\n\n  setDestPage(page: number): this {\n    this.Dest = {\n      type: \"Page\",\n      number: page,\n    };\n    return this;\n  }\n\n  get repr() {\n    const Dest = this.Dest;\n    let target;\n    if (Dest === undefined) target = \"Undefined\";\n    else if (Dest.type === \"Page\") target = \"Page \" + Dest.number;\n    else target = \"Not Parsed\";\n\n    return { name: this.Title, target: target };\n  }\n}\n\nfunction _extractOutlineEntry( doc: PDFDocument, entry: PDFDict): any {\n  const title = entry.get(TITLE) as any;\n  let page = null;\n\n  const dest = entry.get(DEST);\n  const A = entry.get(PDFName.of(\"A\"));\n  if (A) {\n    const dest = doc.context.lookup(A, PDFDict).lookup(PDFName.of(\"D\"), PDFArray);\n    const pageRef = dest.get(0);\n    page = doc.getPages().findIndex(p => p.ref == pageRef)+1;\n  }\n\n  return {title, page };\n}\n\nexport function extractOutlines(doc: PDFDocument): any {\n  getSimpleBookmarks(doc);\n  return;\n\n  const outlineRef = doc.catalog.get(OUTLINES);\n  \n  if (outlineRef === undefined) return undefined;\n\n  const outline_dict = doc.context.lookup(outlineRef) as PDFDict;\n  let first = outline_dict.get(FIRST) as PDFRef | undefined;\n\n  if (first === undefined) return undefined;\n  \n  const result = [];\n\n  while (first !== undefined) {\n    const entry = doc.context.lookup(first) as PDFDict;\n    result.push(_extractOutlineEntry(doc, entry));\n\n    first = entry.get(NEXT) as PDFRef | undefined;\n  }\n  \n  console.log(result);\n  return result;\n}\n\n/**\n * Remove an existing outline from an pdf document.\n * @param doc The document.\n */\nexport function deleteOutline(doc: PDFDocument): void;\n/**\n * For internal use: Deletes all outline entries on the same level and their children.\n * @param doc The document.\n * @param first The outline entry to start at.\n */\nexport function deleteOutline(doc: PDFDocument, first: PDFRef): void;\nexport function deleteOutline(doc: PDFDocument, first?: PDFRef) {\n  for (const [ref, dict] of _Outline(doc, first)) {\n    doc.context.delete(ref);\n    const f = dict.get(FIRST);\n    if (first !== undefined) deleteOutline(doc, f as PDFRef);\n  }\n  const outRef = doc.catalog.get(OUTLINES) as PDFRef | undefined;\n  if (outRef) doc.context.delete(outRef);\n}\n\n/**\n * Add an outline to a document.\n * @param doc The document.\n * @param outline The outline.\n */\nexport function appendOutline(doc: PDFDocument, outline: PDFBookmark[]): void;\n/**\n * For internal use.\n * @param doc\n * @param outline\n * @param parent\n * @param parentDict\n */\nexport function appendOutline(\n  doc: PDFDocument,\n  outline: PDFBookmark[],\n  parent: PDFRef,\n  parentDict: PDFDict\n): void;\nexport function appendOutline(\n  doc: PDFDocument,\n  outline: PDFBookmark[],\n  parent?: PDFRef,\n  parentDict?: PDFDict\n) {\n  if (outline.length === 0) return;\n  if (!parentDict || !parent) {\n    parent = doc.context.nextRef();\n    parentDict = PDFDict.fromMapWithContext(new Map(), doc.context);\n    parentDict.set(PDFName.Type, OUTLINES);\n\n    appendOutline(doc, outline, parent, parentDict);\n\n    doc.context.assign(parent, parentDict);\n    doc.catalog.set(OUTLINES, parent);\n    return;\n  }\n\n  const refs: PDFRef[] = [];\n  for (let i = 0; i < outline.length; i++) refs.push(doc.context.nextRef());\n\n  for (let i = 0; i < outline.length; i++) {\n    const bm = outline[i];\n    const itemRef = refs[i];\n    const itemDict = bm._toDict(doc, parent, refs[i - 1], refs[i + 1]);\n    const Children = bm.Children;\n    if (Children.length !== 0) appendOutline(doc, Children, itemRef, itemDict);\n\n    doc.context.assign(itemRef, itemDict);\n  }\n\n  parentDict.set(PDFName.of(\"Count\"), PDFNumber.of(outline.length));\n  parentDict.set(PDFName.of(\"First\"), refs[0]);\n  parentDict.set(PDFName.of(\"Last\"), refs[refs.length - 1]);\n}\n\nexport type PeekIter<T> = {\n  peek(): T;\n  consume(): T;\n  done: boolean;\n};\nexport function asPeekIter<T>(array: T[]): PeekIter<T> {\n  const iter = {\n    array,\n    i: 0,\n    peek() {\n      return array[this.i];\n    },\n    consume() {\n      return array[this.i++];\n    },\n    get done() {\n      return this.i >= this.array.length;\n    },\n  };\n  return iter;\n}\n\nexport function parseBookmarks(\n  lines: string[] | PeekIter<string>,\n  indent = 0\n): PDFBookmark[] {\n  if (Array.isArray(lines)) lines = asPeekIter(lines);\n\n  const bms: PDFBookmark[] = [];\n\n  while (!lines.done) {\n    let line = lines.peek();\n    const trimLine = line.trim();\n    if (trimLine == \"\" || trimLine.startsWith(\"%\")) {\n      lines.consume();\n      continue;\n    }\n\n    let ind = 0;\n    while (line.charAt(ind) === \" \") ind++;\n\n    if (ind < indent) {\n      return bms;\n    }\n    if (ind > indent) {\n      if (bms.length === 0) throw new Error(\"Root bookmark is undefined\");\n      bms[bms.length - 1].Children.push(...parseBookmarks(lines, ind));\n      continue;\n    }\n\n    // We parse the current line\n    lines.consume();\n\n    line = line.trim();\n    const lastSpace = line.lastIndexOf(\" \");\n\n    let name;\n    let page;\n    if (lastSpace >= 0) {\n      const p = Number.parseInt(line.substring(lastSpace + 1));\n      if (!isNaN(p)) {\n        name = line.substring(0, lastSpace);\n        page = p;\n      }\n    }\n    if (name === undefined || page === undefined) {\n      name = line;\n      page = NaN;\n    }\n\n    bms.push(new PDFBookmark(name, [], { type: \"Page\", number: page }));\n  }\n  return bms;\n}\n","import { render } from \"./AddBookmarks.vue?vue&type=template&id=278ac369&scoped=true&ts=true\"\nimport script from \"./AddBookmarks.vue?vue&type=script&lang=ts\"\nexport * from \"./AddBookmarks.vue?vue&type=script&lang=ts\"\n\nimport \"./AddBookmarks.vue?vue&type=style&index=0&id=278ac369&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-278ac369\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref: \"parent_div\",\n    style: _normalizeStyle(_ctx.style)\n  }, [\n    _createElementVNode(\"div\", {\n      ref: \"fixed\",\n      style: _normalizeStyle(_ctx.innerStyle)\n    }, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ], 4)\n  ], 4))\n}","<template>\n  <div ref=\"parent_div\" :style=\"style\">\n    <div\n      ref=\"fixed\"\n      :style=\"innerStyle\"\n    >\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, StyleValue } from \"vue\";\n\nexport default defineComponent({\n  name: \"FixedSizeContainer\",\n  props: {\n    style: [String, Object] as PropType<StyleValue>,\n  },\n  methods: {\n    onResize() {\n      let parent = this.$refs.parent_div as HTMLElement | undefined;\n      let fix = this.$refs.fixed as HTMLElement | undefined;\n      if (!parent || !fix) return;\n\n      this.fHeight = parent.clientHeight;\n      this.fWidth = parent.clientWidth;\n    },\n  },\n  data() {\n    return {\n      fWidth: undefined as number | undefined,\n      fHeight: undefined as number | undefined,\n      observer: undefined as ResizeObserver | undefined,\n    };\n  },\n  computed: {\n    innerStyle() {\n      return {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: this.fWidth !== undefined ? this.fWidth+'px' : undefined,\n        height: this.fHeight !== undefined ? this.fHeight+'px' : undefined,\n      } as StyleValue;\n    }\n  },\n  mounted() {\n    this.observer = new ResizeObserver(() => this.onResize());\n    this.observer.observe(this.$refs.parent_div as Element);\n    requestAnimationFrame(() => this.onResize());\n  },\n  beforeUnmount() {\n    this.observer?.disconnect();\n    this.observer = undefined;\n  },\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\"></style>\n","import { render } from \"./FixedSizeContainer.vue?vue&type=template&id=785ab81a&ts=true\"\nimport script from \"./FixedSizeContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./FixedSizeContainer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-53d2363a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"width\":\"100%\",\"height\":\"100%\",\"padding\":\"2em\"} }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Drop PDF here\", -1))\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      ref: \"drop_target\",\n      class: \"drop_target\",\n      onDragenter: _cache[0] || (_cache[0] = ($event: any) => (_ctx.dragStart($event))),\n      onDragleave: _cache[1] || (_cache[1] = ($event: any) => (_ctx.dragEnd($event))),\n      onDragend: _cache[2] || (_cache[2] = ($event: any) => (_ctx.dragEnd($event))),\n      onDragover: _cache[3] || (_cache[3] = ($event: any) => (_ctx.dragOver($event))),\n      onDrop: _cache[4] || (_cache[4] = ($event: any) => (_ctx.drop($event)))\n    }, _hoisted_3, 544)\n  ]))\n}","<template>\n  <div style=\"width: 100%; height: 100%; padding: 2em\">\n    <div\n      ref=\"drop_target\"\n      class=\"drop_target\"\n      @dragenter=\"dragStart($event)\"\n      @dragleave=\"dragEnd($event)\"\n      @dragend=\"dragEnd($event)\"\n      @dragover=\"dragOver($event)\"\n      @drop=\"drop($event)\"\n    >\n      <span>Drop PDF here</span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"HelloWorld\",\n  props: {\n    done: {type: Function as PropType<(opt: {name: string, content: ArrayBuffer}) => any>}\n  },\n  methods: {\n    dragStart(ev: DragEvent) {\n      (this.$refs.drop_target as any).style.color = \"green\";\n    },\n    dragEnd(ev: DragEvent) {\n      (this.$refs.drop_target as any).style.color = \"\";\n      console.log(\"end\");\n    },\n    dragOver(ev: DragEvent) {\n      ev.preventDefault();\n    },\n    drop(ev: DragEvent) {\n      ev.preventDefault();\n      let f = ev.dataTransfer?.files;\n      if(f === undefined)\n      return;\n    \n      if(f.length !== 1)\n      return;\n      let file = f[0];\n      let handler = this.$props.done;\n      let r = new FileReader();\n      r.onload = function() {\n        handler?.({\n          name: file.name,\n          content: this.result as ArrayBuffer\n        });\n      }\n      r.readAsArrayBuffer(file);\n    },\n  },\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.drop_target {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  border-radius: 25px;\n  border: 4px dashed currentColor;\n  color: gray;\n  font-size: 1.5em;\n  font-weight: bold;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import { render } from \"./Upload.vue?vue&type=template&id=53d2363a&scoped=true&ts=true\"\nimport script from \"./Upload.vue?vue&type=script&lang=ts\"\nexport * from \"./Upload.vue?vue&type=script&lang=ts\"\n\nimport \"./Upload.vue?vue&type=style&index=0&id=53d2363a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53d2363a\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=f202c294&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f202c294&lang=scss\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(\n\t\tApp).mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpdf_bookmark_editor\"] = self[\"webpackChunkpdf_bookmark_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(5430); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_Upload","_resolveComponent","_component_AddBookmarks","_component_Fixed","_openBlock","_createBlock","style","default","_withCtx","state","name","key","done","fileUpload","_createCommentVNode","ref","setBookmarks","_","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","opacity","_component_TreeView","_createElementBlock","_Fragment","_createVNode","nodes","bm","children","node","props","_toDisplayString","title","_createTextVNode","dest","onClick","$event","bookmarks","_renderList","draggable","_renderSlot","$slots","data","TyperInferHelper","factory","defineComponent","type","Array","required","Function","__exports__","_parseBookmarkDict","doc","dict","first","lookupMaybe","PDFName","of","PDFDict","undefined","result","PDFString","PDFHexString","next","lookup","a","console","log","simpleDest","PDFArray","pageRef","get","getPages","findIndex","p","asString","push","getSimpleBookmarks","oulines","catalog","_fromSimpleBookmark","_defaults","_ref","bookmark_ref","context","nextRef","bookmark","fromMapWithContext","Map","assign","set","fromText","_setSimpleBookmarks","withContext","page","asMap","child_refs","i","length","child","delete","PDFNumber","setPdfOutline","outlines_ref","outlines","OUTLINES","FIRST","NEXT","TITLE","DEST","_Outline","currentRef","outRef","outDict","current","PDFBookmark","parseOutline","curr","from","PDFRef","destType","constructor","Title","Children","Dest","_defineProperty","hasChildren","this","_toDict","parent","prev","Parent","d","arr","number","setDestPage","repr","target","asPeekIter","array","iter","peek","consume","parseBookmarks","lines","indent","isArray","bms","line","trimLine","trim","startsWith","ind","charAt","Error","lastSpace","lastIndexOf","Number","parseInt","substring","isNaN","NaN","bookmarkstotext","text","b","repeat","texttobookmarks","index","search","_indent","match","slice","components","TreeView","editor","methods","setDefaultText","dispatch","changes","to","insert","editorUpdate","update","toJSON","docChanged","mounted","e","EditorView","$refs","extensions","basicSetup","updateListener","dom","height","width","_normalizeStyle","innerStyle","String","Object","onResize","parent_div","fix","fixed","fHeight","clientHeight","fWidth","clientWidth","observer","computed","position","top","left","ResizeObserver","observe","requestAnimationFrame","beforeUnmount","disconnect","onDragenter","dragStart","onDragleave","dragEnd","onDragend","onDragover","dragOver","onDrop","drop","ev","drop_target","color","preventDefault","f","dataTransfer","files","file","handler","r","FileReader","onload","content","readAsArrayBuffer","AddBookmarks","Fixed","Upload","PDFDocument","load","then","pdf","$nextTick","bmeditor","catch","error","pdf2","bytes","save","blob","Blob","dataURI","URL","createObjectURL","window","open","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}